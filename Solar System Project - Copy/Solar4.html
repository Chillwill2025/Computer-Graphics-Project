<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Space Station - Orbital Command Center</title>
	<style>
		body {
			background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0d1b2a 100%);
			color: #00ff88;
			font-family: 'Courier New', monospace;
			margin: 10px;
			padding: 10px;
		}
		#gl-canvas {
			border: 3px solid #00ff88;
			box-shadow: 0 0 20px rgba(0, 255, 136, 0.5), inset 0 0 20px rgba(0, 255, 136, 0.1);
			display: block;
			margin-bottom: 15px;
		}
		div {
			margin-top: 10px;
		}
		button {
			background: #1a1a2e;
			border: 2px solid #00ff88;
			color: #00ff88;
			padding: 8px 12px;
			margin: 5px;
			cursor: pointer;
			font-family: 'Courier New', monospace;
			font-weight: bold;
			transition: all 0.3s ease;
			text-shadow: 0 0 10px rgba(0, 255, 136, 0.7);
		}
		button:hover {
			background: #00ff88;
			color: #1a1a2e;
			box-shadow: 0 0 20px rgba(0, 255, 136, 0.8);
			text-shadow: none;
		}
		button:active {
			background: #00cc6a;
		}
		label {
			display: inline-block;
			margin-left: 10px;
		}
		input[type="range"] {
			cursor: pointer;
		}
		strong {
			color: #00ffff;
			text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
		}
	</style>
</head>
<body>
<canvas id="gl-canvas" width="880" height="660">Your browser doesn't support canvas</canvas>
<div>
	<button id="toggle">Pause</button>
	<label>Speed: <input id="speed" type="range" min="0.1" max="5" step="0.1" value="1"></label>
</div>
<div style="margin-top: 10px;">
	<strong>Camera:</strong>
	<button id="cam-sun">Sun</button>
	<button id="cam-planet">Planet</button>
	<button id="cam-planet2">Planet2</button>
	<button id="cam-planet3">Planet3</button>
	<button id="cam-planet4">Planet4</button>
	<button id="cam-planet5">Planet5</button>
	<button id="cam-moon">Moon</button>
	|
	<button id="cam-sun2">Sun2</button>
	<button id="cam-planetA">PlanetA</button>
	<button id="cam-planetB">PlanetB</button>
	<button id="cam-planetC">PlanetC</button>
	|
	<button id="cam-reset">Reset</button>
</div>

<!-- Lighting vertex shader -->
<script id="vertex-shader" type="x-shader/x-vertex">
#version 300 es
in vec4 aPosition;
in vec3 aNormal;
in vec2 aTexCoord;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;

uniform vec4 ambientProduct;
uniform vec4 diffuseProduct;
uniform vec4 specularProduct;
uniform vec4 lightPosition;
uniform float shininess;
uniform vec4 uColor;
uniform bool uEmissive;

out vec4 vColor;
out vec2 vTexCoord;

void main() {
	vec3 pos = (modelViewMatrix * aPosition).xyz;
	vec3 N = normalize((modelViewMatrix * vec4(aNormal, 0.0)).xyz);
	vec3 L = normalize(lightPosition.xyz - pos);
	vec3 E = normalize(-pos);
	vec3 H = normalize(L + E);

	vec4 ambient = ambientProduct;
	float Kd = max(dot(L, N), 0.0);
	vec4 diffuse = Kd * diffuseProduct;
	float Ks = pow(max(dot(N, H), 0.0), shininess);
	vec4 specular = Ks * specularProduct;
	if(dot(L, N) < 0.0) specular = vec4(0.0);

	if(uEmissive) {
		vColor = uColor;
	} else {
		vec3 lit = (ambient.rgb * uColor.rgb) + (diffuse.rgb * uColor.rgb) + specular.rgb;
		vColor = vec4(lit, uColor.a);
	}
	vColor.a = uColor.a;
	vTexCoord = aTexCoord;

	gl_Position = projectionMatrix * modelViewMatrix * aPosition;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
#version 300 es
precision mediump float;
in vec4 vColor;
in vec2 vTexCoord;
out vec4 fColor;

uniform sampler2D uTexture;
uniform bool uUseTexture;

void main() {
	vec4 base = vColor;
	if(uUseTexture) {
		vec3 tex = texture(uTexture, vTexCoord).rgb;
		// modulate surface color by texture (checkerboard will tint)
		base.rgb = base.rgb * tex;
	}
	fColor = base;
}
</script>

<!-- Simple color shader for orbit lines -->
<script id="vertex-shader-lines" type="x-shader/x-vertex">
#version 300 es
in vec4 aPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
void main(){ gl_Position = projectionMatrix * modelViewMatrix * aPosition; }
</script>

<script id="fragment-shader-lines" type="x-shader/x-fragment">
#version 300 es
precision mediump float;
uniform vec4 uColor;
out vec4 fColor;
void main(){ fColor = uColor; }
</script>

<!-- Starfield background shaders -->
<script id="vertex-shader-stars" type="x-shader/x-vertex">
#version 300 es
in vec4 aPosition;
out vec2 vUV;
void main() {
	vUV = (aPosition.xy + 1.0) * 0.5;
	gl_Position = aPosition;
}
</script>

<script id="fragment-shader-stars" type="x-shader/x-fragment">
#version 300 es
precision highp float;
in vec2 vUV;
out vec4 fColor;

// Simple hash function for pseudo-random numbers
float hash(vec2 p) {
	return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);
}

// Improved noise for more natural star distribution
float noise(vec2 p) {
	vec2 i = floor(p);
	vec2 f = fract(p);
	f = f * f * (3.0 - 2.0 * f);
	
	float a = hash(i);
	float b = hash(i + vec2(1.0, 0.0));
	float c = hash(i + vec2(0.0, 1.0));
	float d = hash(i + vec2(1.0, 1.0));
	
	return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);
}

void main() {
	vec2 uv = vUV * 100.0; // Scale for star density
	float star = noise(uv);
	
	// Create sharp stars - only show brightest spots
	float threshold = 0.95;
	float brightness = 0.0;
	if (star > threshold) {
		brightness = pow((star - threshold) / (1.0 - threshold), 2.0) * 1.2;
	}
	
	// Add some color variation to stars
	vec3 starColor = mix(
		vec3(1.0, 0.95, 0.8),
		mix(vec3(0.7, 0.85, 1.0), vec3(1.0, 1.0, 1.0), noise(uv * 0.5)),
		noise(uv * 2.0)
	);
	
	fColor = vec4(starColor * brightness, 1.0);
}
</script>

<script type="text/javascript" src="Common/initShaders.js"></script>
<script type="text/javascript" src="Common/MVnew.js"></script>
<script type="text/javascript" src="geometry.js"></script>
<script type="text/javascript" src="solarSystem.js"></script>

</body>
</html>

